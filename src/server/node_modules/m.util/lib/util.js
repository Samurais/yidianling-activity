
module.exports = {
  /**
	 * 功能：时间戳转换时间
	 * 用法: expUse.format(new Date().getTime(), "yyyy-MM-dd hh:mm:ss W")
	 */
	format: function(timenumber, format) {

		let week = ["星期天", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
			newDate = new Date(timenumber),
			date = {
				"M+": (newDate.getMonth() + 1),
				"d+": newDate.getDate(),
				"h+": newDate.getHours(),
				"m+": newDate.getMinutes(),
				"s+": newDate.getSeconds(),
				"q+": Math.floor((newDate.getMonth() + 3) / 3),
				"S+": newDate.getMilliseconds(),
				"w+": newDate.getDay(),
				"W+": week[newDate.getDay()],
				"P+": () => {
					if(newDate.getHours() >= 11 && newDate.getHours() < 12)
					return "中午";

					if(newDate.getHours() < 11)
					return "上午";

					if(newDate.getHours() >=12)
					return "下午";
				}
			};

		if (/(y+)/i.test(format)) {
			format = format.replace(RegExp.$1, (newDate.getFullYear() + '').substr(4 - RegExp.$1.length));
		}

		for (var k in date) {
			if (new RegExp("(" + k + ")").test(format)) {
				format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? date[k] : ("00" + date[k]).substr(("" + date[k]).length));
			}
		}

		return format;
  },

  // 时区转换
  timezone(time) {
    return time.split(".")[0].replace("T", " ");
  },

  // 获取随机字符串
  randomString(len = 15){
    let chars = `ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz${new Date().getTime()}`;
    let maxPos = chars.length;
    let pwd = '';

    for (let i = 0; i < len; i++) {
      pwd += chars.charAt(Math.floor(Math.random() * maxPos));
    }
    return pwd;
  },

  // 请求来源
  filterGet: /^(\/jump\/)+|^(\/api\/)+/i,
};
