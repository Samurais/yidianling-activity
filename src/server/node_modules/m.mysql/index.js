
const mysql = require("./lib");
const config = require("./config");
const Util = require('m.util');

module.exports = {

  init(){

    mysql.createTable({
      databaseName: config.databaseName,
      tableName: "activity_base",
    });

    // 修改字段
    // mysql.updateTableData({
    //   databaseName: config.databaseName,
    //   tableName: "activity_base",
    //   where: "module_id=004",
    //   data: {
    //     "create_name": "yuanyuan",
    //     "create_time": Util.format(new Date().getTime(), "yyyy/MM/dd hh:mm:ss"),
    //   }
    // });

    // 查数据
    // mysql.selectTableData({
    //   databaseName: config.databaseName,
    //   tableName: "activity_base",
    //   data: {
    //     column: "*",
    //     where: "module_id=001",
    //     limit: "",
    //     offset: "",
    //   }
    // }, function(data){

    //   data.map((item, index) => {
    //     let dataStr = JSON.stringify(item);
    //     let dataInfo = JSON.parse(dataStr);

    //     let dataTime = new Date().getTime(dataInfo.create_time);
    //   });
    // });

    // 添加字段
    // mysql.alterAddTable({
    //   databaseName: config.databaseName,
    //   tableName: "activity_base",
    //   data: [{
    //     name: "fff",
    //     type: "varchar",
    //     limit: "30",
    //     status: "NOT NULL",
    //     index: true,
    //   }]
    // });

    // 插入数据
    // mysql.insertTableData({
    //   databaseName: config.databaseName,
    //   tableName: "activity_base",
    //   data: [{
    //     "module_id": "001",
    //     "source_module_id": "001",
    //     "create_name": "zhuqiao",
    //     "job_number": "001",
    //     "create_time": Util.format(new Date().getTime(), "yyyy/MM/dd hh:mm:ss"),
    //     "longer": "1",
    //     "clear_time": Util.format(new Date().getTime(), "yyyy/MM/dd hh:mm:ss"),
    //   }]
    // });

    // let d = qs.stringify({
    //   "a": 1,
    //   "d": "taeeea",
    //   "c": JSON.stringify({a:1,b:2})
    // });

    // console.log("d >>>>>>>")
    // console.log(d)

    // let aaa = connection.escape(d);

    // console.log("aaa >>>>>>>")
    // aaa = aaa.replace(/\'/g, "");
    // console.log(aaa)

    // let bbb = qs.parse(aaa);

    // console.log("bbb >>>>>>>")
    // console.log(bbb)
  }
}
